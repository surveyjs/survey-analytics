{"fixtures":[{"name":"columnactions","pageUrl":"http://localhost:8080/examples/datatables.html","tests":[{"name":"Check show/hide questions","commands":[{"type":"execute-expression","studio":{"expressionCommandType":"define-function"},"callsite":"0","resultVariableName":"getColumnsVisibilityArray","expression":"ClientFunction(() => {\n    return window.surveyAnalyticsDatatables.state.elements.map((column)=>{return column.isVisible});\n})"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer th').withText('Question 1').visible"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').withText('Question 1').nth(3).visible"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer .tabulator-col').nth(1).visible"},"ruleType":"class","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer [title=\"Question 1\"]').nth(1).visible"},"ruleType":"$attr$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).visible"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('div').withText('Question 1').nth(4).visible"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-col').nth(1).visible"},"ruleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-headers div').withText('Question 1').visible"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-headers .tabulator-col').nth(1).visible"},"ruleType":"class","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Question 1\"]').nth(1).visible"},"ruleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).visible"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"1","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer th').withText('Question 1').visible"},"options":{},"expected":{"type":"js-expr","value":"true"}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"2","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnsVisibilityArray()"},"options":{},"expected":{"type":"js-expr","value":"[true, true, true]"}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 1\"] button[title=\"Hide column\"]')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 1\"] button[title=\"Hide column\"]')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__svg-button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Hide column\"] svg use')"},"ruleType":"$dom$","ancestorRuleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":6,"offsetY":11},"options":{},"type":"click","callsite":"3"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer   th').withText('Question 1').nth(3).visible"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').withText('Question 1').nth(3).visible"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer .tabulator-col').nth(1).visible"},"ruleType":"class","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer [title=\"Question 1\"]').nth(1).visible"},"ruleType":"$attr$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).visible"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('div').withText('Question 1').nth(4).visible"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-col').nth(1).visible"},"ruleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-headers div').withText('Question 1').visible"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-headers .tabulator-col').nth(1).visible"},"ruleType":"class","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Question 1\"]').nth(1).visible"},"ruleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).visible"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"4","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer   th').withText('Question 1').nth(3).visible"},"options":{},"expected":{"type":"js-expr","value":"false"}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"5","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnsVisibilityArray()"},"options":{},"expected":{"type":"js-expr","value":"[false, true, true]"}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-table__show-column.sa-table__header-extension')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-table__show-column.sa-table__header-extension')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer .sa-table__show-column.sa-table__header-extension')"},"ruleType":"class","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(1).find('div').nth(1).find('select')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__show-column.sa-table__header-extension')"},"ruleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__header-extensions .sa-table__show-column.sa-table__header-extension')"},"ruleType":"class","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__header-extensions select')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(1).find('div').nth(1).find('select')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":67,"offsetY":24},"options":{},"type":"click","callsite":"6"},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-table__show-column.sa-table__header-extension option').withText('Question 1')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-table__show-column.sa-table__header-extension option').withText('Question 1')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer .sa-table__show-column.sa-table__header-extension')"},"ruleType":"class","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(1).find('div').nth(1).find('select')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__show-column.sa-table__header-extension')"},"ruleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__header-extensions .sa-table__show-column.sa-table__header-extension')"},"ruleType":"class","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__header-extensions select')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(1).find('div').nth(1).find('select')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":67,"offsetY":24},"options":{},"type":"click","callsite":"7"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer th').withText('Question 1').visible"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').withText('Question 1').nth(3).visible"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer .tabulator-col').nth(1).visible"},"ruleType":"class","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer [title=\"Question 1\"]').nth(1).visible"},"ruleType":"$attr$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).visible"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('div').withText('Question 1').nth(4).visible"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-col').nth(1).visible"},"ruleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-headers div').withText('Question 1').visible"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.tabulator-headers .tabulator-col').nth(1).visible"},"ruleType":"class","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Question 1\"]').nth(1).visible"},"ruleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).visible"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"8","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer th').withText('Question 1').visible"},"options":{},"expected":{"type":"js-expr","value":"true"}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"9","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnsVisibilityArray()"},"options":{},"expected":{"type":"js-expr","value":"[true, true, true]"}}]},{"name":"Check move to details","commands":[{"type":"execute-expression","studio":{"expressionCommandType":"define-function"},"callsite":"0","resultVariableName":"getColumnsLocationsArray","expression":"ClientFunction(() => {\n    return window.surveyAnalyticsDatatables.state.elements.map(column => column.location);\n})"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"1","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 1\"] ').visible"},"options":{},"expected":{"type":"js-expr","value":"true"}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"2","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnsLocationsArray()"},"options":{},"expected":{"type":"js-expr","value":"[0, 0, 0]"}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__svg-button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Hide column\"] svg use')"},"ruleType":"$dom$","ancestorRuleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":6,"offsetY":11},"options":{},"type":"click","callsite":"3"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer td').withText('Question 1').exists"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer td').withText('Question 1').exists"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div').nth(27).find('div div table tr td').exists"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('td').withText('Question 1').exists"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').withText('Question 1').exists"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').exists"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div').nth(27).find('div div table tr td').exists"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".exists"},"callsite":"4","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer td').withText('Question 1').exists"},"options":{},"expected":{"type":"js-expr","value":"false"}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 1\"] button[title=\"Move to Detail\"]')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 1\"] button[title=\"Move to Detail\"]')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__svg-button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Hide column\"] svg use')"},"ruleType":"$dom$","ancestorRuleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":6,"offsetY":11},"options":{},"type":"click","callsite":"5"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"6","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 1\"]').visible"},"options":{},"expected":{"type":"js-expr","value":"false"}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__svg-button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Hide column\"] svg use')"},"ruleType":"$dom$","ancestorRuleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":6,"offsetY":11},"options":{},"type":"click","callsite":"7"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-datatables__details-container td').withText('Question 1').visible"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer td').withText('Question 1').visible"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div').nth(27).find('div div table tr td').visible"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('td').withText('Question 1').visible"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').withText('Question 1').visible"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').visible"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div').nth(27).find('div div table tr td').visible"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"8","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-datatables__details-container td').withText('Question 1').visible"},"options":{},"expected":{"type":"js-expr","value":"true"}},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer td').withText('Yes').visible"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer td').withText('Question 1').visible"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div').nth(27).find('div div table tr td').visible"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('td').withText('Question 1').visible"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').withText('Question 1').visible"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').visible"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div').nth(27).find('div div table tr td').visible"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"9","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer td').withText('Yes').visible"},"options":{},"expected":{"type":"js-expr","value":"true"}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"10","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnsLocationsArray()"},"options":{},"expected":{"type":"js-expr","value":"[1, 0, 0]"}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer button').withText('Show as Column')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer button').withText('Show as Column')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer button').withText('Show as Column')"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer .sa-table__btn.sa-table__btn--gray').nth(3)"},"ruleType":"class","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div').nth(27).find('div div table tr td').nth(2).find('button')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('button').withText('Show as Column')"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__btn.sa-table__btn--gray').nth(3)"},"ruleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail button').withText('Show as Column')"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail .sa-table__btn.sa-table__btn--gray')"},"ruleType":"class","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').nth(2).find('button')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div').nth(27).find('div div table tr td').nth(2).find('button')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":63,"offsetY":29},"options":{},"type":"click","callsite":"11"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"12","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 1\"] ').visible"},"options":{},"expected":{"type":"js-expr","value":"true"}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"13","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnsLocationsArray()"},"options":{},"expected":{"type":"js-expr","value":"[0, 0, 0]"}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__svg-button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Hide column\"] svg use')"},"ruleType":"$dom$","ancestorRuleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":6,"offsetY":11},"options":{},"type":"click","callsite":"14"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-datatables__details-container td').withText('Question 1').exists"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer td').withText('Question 1').exists"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div').nth(27).find('div div table tr td').exists"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('td').withText('Question 1').exists"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').withText('Question 1').exists"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').exists"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div').nth(27).find('div div table tr td').exists"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".exists"},"callsite":"15","assertionType":"eql","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-datatables__details-container td').withText('Question 1').exists"},"options":{},"expected":{"type":"js-expr","value":"false"}}]},{"name":"Check columns drag and drop","commands":[{"type":"execute-expression","studio":{"expressionCommandType":"define-function"},"callsite":"0","resultVariableName":"getColumnNamesOrder","expression":"ClientFunction(() => {\n    var names = [];\n    document.querySelectorAll(\".dataTables_scrollHead thead th\").forEach((col) => { names.push(col.innerText) })\n    names.splice(0, 1);\n    return names;\n})"},{"type":"execute-expression","studio":{"expressionCommandType":"define-function"},"callsite":"1","resultVariableName":"getColumnNamesOrderInState","expression":"ClientFunction(() => {\n    var names = [];\n    window.surveyAnalyticsDatatables.state.elements.forEach((col) => { names.push(col.displayName) })\n    return names;\n})"},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer .dataTables_scrollHead thead th[aria-label=\"Question 1\"] button.sa-table__drag-button')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer .dataTables_scrollHead thead th[aria-label=\"Question 1\"] button.sa-table__drag-button')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).find('div div div div div button svg use')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__svg-button.sa-table__drag-button svg use')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Question 1\"] div div div div div button svg use')"},"ruleType":"$dom$","ancestorRuleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).find('div div div div div button svg use')"},"ruleType":"$dom$"}],"useOffsets":true,"offsetX":5,"offsetY":10},"dragOffsetX":600,"dragOffsetY":0,"options":{"speed":0.01,"offsetX":5,"offsetY":10},"type":"drag","callsite":"2"},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"3","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnNamesOrder()"},"options":{},"expected":{"type":"js-expr","value":"[\"Question 2\", \"Question 1\", \"Question 3\"]"}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"4","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnNamesOrderInState()"},"options":{},"expected":{"type":"js-expr","value":"[\"Question 2\", \"Question 1\", \"Question 3\"]"}}]},{"name":"Check public/private actions","commands":[{"type":"execute-expression","studio":{"expressionCommandType":"define-function"},"callsite":"0","resultVariableName":"getPublicitArrayInState","expression":"ClientFunction(() => {\n    return window.surveyAnalyticsDatatables.state.elements.map(col => col.isPublic)\n})"},{"type":"click","studio":{},"callsite":"1","selector":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 2\"] button.sa-table__svg-button[title=\"Make column private\"]')"},"options":{}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"2","assertionType":"eql","actual":{"type":"js-expr","value":"getPublicitArrayInState()"},"options":{},"expected":{"type":"js-expr","value":"[true, false, true]"}},{"type":"click","studio":{},"callsite":"3","selector":{"type":"js-expr","value":"Selector('#dataTablesContainer th[aria-label=\"Question 2\"] button.sa-table__svg-button[title=\"Make column public\"]')"},"options":{}},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"4","assertionType":"eql","actual":{"type":"js-expr","value":"getPublicitArrayInState()"},"options":{},"expected":{"type":"js-expr","value":"[true, true, true]"}}]},{"name":"Check datatables taking into account state","commands":[{"type":"execute-expression","studio":{"expressionCommandType":"define-function"},"callsite":"0","resultVariableName":"getColumnNamesOrder","expression":"ClientFunction(() => {\n    var names = [];\n    document.querySelectorAll(\"#dataTablesContainer .dataTables_scrollHead thead th\").forEach((col) => { names.push(col.innerText) })\n    names.splice(0, 1);\n    return names;\n})"},{"type":"execute-async-expression","studio":{},"callsite":"1","expression":"var json = {\r\n  elements: [\r\n    {\r\n      type: \"boolean\",\r\n      name: \"bool\",\r\n      title: \"Question 1\",\r\n    },\r\n    {\r\n      type: \"boolean\",\r\n      name: \"bool2\",\r\n      title: \"Question 2\",\r\n    },\r\n    {\r\n      type: \"boolean\",\r\n      name: \"bool3\",\r\n      title: \"Question 3\",\r\n    },\r\n    {\r\n      type: \"boolean\",\r\n      name: \"bool4\",\r\n      title: \"Question 4\",\r\n    },\r\n  ],\r\n};\r\n\r\nvar data = [\r\n  {\r\n    bool: true,\r\n    bool2: false,\r\n    bool3: true,\r\n    bool4: true,\r\n  },\r\n  {\r\n    bool: true,\r\n    bool2: false,\r\n    bool3: false,\r\n    bool4: true,\r\n\r\n  },\r\n  {\r\n    bool: false,\r\n    bool2: true,\r\n    bool3: false,\r\n    bool4: true,\r\n  },\r\n];\r\n\r\nvar initDatatables = ClientFunction((json, data, options) => {\r\n  window.survey = new Survey.SurveyModel(json);\r\n  window.surveyAnalyticsDatatables = new SurveyAnalyticsDatatables.DataTables(\r\n    survey,\r\n    data,\r\n    options,\r\n    [\r\n      { \"name\": \"bool4\", \"displayName\": \"Question 4\", \"dataType\": 0, \"isVisible\": true, \"location\": 0 },\r\n      { \"name\": \"bool\", \"displayName\": \"Question 1\", \"dataType\": 0, \"isVisible\": false, \"location\": 0 },\r\n      { \"name\": \"bool2\", \"displayName\": \"Question 2\", \"dataType\": 0, \"isVisible\": true, \"location\": 1 },\r\n      { \"name\": \"bool3\", \"displayName\": \"Question 3\", \"dataType\": 0, \"isVisible\": true, \"location\": 0 }\r\n    ]\r\n\r\n  );\r\n  surveyAnalyticsDatatables.render(document.getElementById(\"dataTablesContainer\"));\r\n})\r\n\r\nawait initDatatables(json, data, { actionsColumnWidth: 100 });\r\n\r\n"},{"type":"assertion","studio":{"assertionMode":"checkFunction","selectorPostfix":"","selectors":[]},"callsite":"2","assertionType":"eql","actual":{"type":"js-expr","value":"getColumnNamesOrder()"},"options":{},"expected":{"type":"js-expr","value":"[\"Question 4\", \"Question 3\"]"}},{"type":"assertion","studio":{"assertionMode":"checkElement","selectorPostfix":".visible"},"callsite":"3","assertionType":"notOk","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer thead th').withText('Question 1').visible"},"options":{}},{"type":"assertion","studio":{"assertionMode":"checkElement","selectorPostfix":".visible"},"callsite":"4","assertionType":"notOk","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer .tabulator-col').withText('Question 2').visible"},"options":{}},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-table__show-column.sa-table__header-extension option').exists"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer .sa-table__show-column.sa-table__header-extension').exists"},"ruleType":"class","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(1).find('div').nth(1).find('select').exists"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__show-column.sa-table__header-extension').exists"},"ruleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__header-extensions .sa-table__show-column.sa-table__header-extension').exists"},"ruleType":"class","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__header-extensions select').exists"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(1).find('div').nth(1).find('select').exists"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".exists"},"callsite":"5","assertionType":"ok","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer .sa-table__show-column.sa-table__header-extension option').exists"},"options":{}},{"selector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"studio":{"selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer tbody tr:nth-child(1) button[title=\"Show minor columns\"]')"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__svg-button').nth(2).find('svg use')"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('[title=\"Hide column\"] svg use')"},"ruleType":"$dom$","ancestorRuleType":"$attr$"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div div div').nth(8).find('div div div div div button').nth(2).find('svg use')"},"ruleType":"$dom$"}],"useOffsets":false,"offsetX":6,"offsetY":11},"options":{},"type":"click","callsite":"6"},{"type":"assertion","studio":{"assertionMode":"checkElement","selectors":[{"rawSelector":{"type":"js-expr","value":"Selector('#dataTablesContainer td').withText('Question 2').visible"},"ruleType":"$edited$"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer td').withText('Question 2').visible"},"ruleType":"$text$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('#tabulatorContainer div').nth(6).find('div').nth(43).find('div div table tr td').visible"},"ruleType":"$dom$","ancestorRuleType":"id"},{"rawSelector":{"type":"js-expr","value":"Selector('td').withText('Question 2').visible"},"ruleType":"$text$"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').withText('Question 2').visible"},"ruleType":"$text$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('.sa-table__detail td').visible"},"ruleType":"$dom$","ancestorRuleType":"class"},{"rawSelector":{"type":"js-expr","value":"Selector('div div').nth(6).find('div').nth(43).find('div div table tr td').visible"},"ruleType":"$dom$"}],"selectorType":"CSS Selector","selectorPostfix":".visible"},"callsite":"7","assertionType":"ok","actual":{"type":"js-expr","value":"Selector('#dataTablesContainer td').withText('Question 2').visible"},"options":{}}]}],"beforeEachCommands":[{"type":"resize-window","studio":{},"callsite":"beforeEachHook_0","width":1920,"height":1080},{"type":"execute-async-expression","studio":{},"callsite":"beforeEachHook_1","expression":"var json = {\r\n  elements: [\r\n    {\r\n      type: \"boolean\",\r\n      name: \"bool\",\r\n      title: \"Question 1\",\r\n    },\r\n    {\r\n      type: \"boolean\",\r\n      name: \"bool2\",\r\n      title: \"Question 2\",\r\n    },\r\n    {\r\n      type: \"boolean\",\r\n      name: \"bool3\",\r\n      title: \"Question 3\",\r\n    },\r\n  ],\r\n};\r\n\r\nvar data = [\r\n  {\r\n    bool: true,\r\n    bool2: false,\r\n    bool3: true,\r\n  },\r\n  {\r\n    bool: true,\r\n    bool2: false,\r\n    bool3: false,\r\n  },\r\n  {\r\n    bool: false,\r\n    bool2: true,\r\n    bool3: false,\r\n  },\r\n];\r\n\r\nvar initDatatables = ClientFunction((json, data, options) => {\r\n  window.SurveyAnalyticsDatatables.TableExtensions.findExtension(\r\n    \"column\",\r\n    \"makepublic\"\r\n  ).visibleIndex = 0;\r\n\r\n  var survey = new Survey.SurveyModel(json);\r\n  window.surveyAnalyticsDatatables = new SurveyAnalyticsDatatables.DataTables(\r\n    survey,\r\n    data,\r\n    options\r\n  );\r\n  surveyAnalyticsDatatables.render(document.getElementById(\"dataTablesContainer\"));\r\n})\r\n\r\nawait initDatatables(json, data, { actionsColumnWidth: 100 });\r\n\r\n"}]}]}
